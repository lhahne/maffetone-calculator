---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Race Pace Estimator (Riegel's Formula)">
    <main
        class="mx-auto flex min-h-screen max-w-5xl flex-col gap-10 px-6 pb-14 pt-24"
    >
        <header class="space-y-4">
            <p
                class="text-sm font-semibold uppercase tracking-[0.3em] text-sky-300"
            >
                Race Predictor
            </p>
            <h1
                class="text-4xl font-semibold leading-tight text-white md:text-5xl"
            >
                Estimate your race performance with Riegel's Formula.
            </h1>
            <p class="max-w-2xl text-lg text-slate-300">
                Predict your race time for any distance based on a recent
                result. Riegel's Formula (T<sub>2</sub> = T<sub>1</sub> Ã— (D<sub
                    >2</sub
                > / D<sub>1</sub>)<sup>1.06</sup>) is a widely used benchmark
                for endurance athletes.
            </p>
        </header>

        <section class="grid gap-10 lg:grid-cols-[1.2fr_0.8fr]">
            <div class="space-y-8">
                <!-- Recent Result -->
                <div
                    class="rounded-3xl border border-white/10 bg-white/5 p-8 shadow-glow backdrop-blur space-y-6"
                >
                    <h2 class="text-xl font-semibold text-white">
                        Your Recent Result
                    </h2>

                    <div class="grid gap-6 md:grid-cols-2">
                        <div class="space-y-3">
                            <label
                                class="text-sm font-medium text-slate-400 uppercase tracking-wider"
                                >Distance (km)</label
                            >
                            <div class="flex gap-2">
                                <input
                                    id="input-distance"
                                    type="number"
                                    step="0.1"
                                    value="5"
                                    class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-lg text-white outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-400/50"
                                />
                            </div>
                            <div class="flex flex-wrap gap-2">
                                <button
                                    class="preset-btn px-3 py-1 text-xs rounded-full border border-white/10 bg-white/5 hover:bg-white/10"
                                    data-value="5">5k</button
                                >
                                <button
                                    class="preset-btn px-3 py-1 text-xs rounded-full border border-white/10 bg-white/5 hover:bg-white/10"
                                    data-value="10">10k</button
                                >
                                <button
                                    class="preset-btn px-3 py-1 text-xs rounded-full border border-white/10 bg-white/5 hover:bg-white/10"
                                    data-value="21.0975">HM</button
                                >
                                <button
                                    class="preset-btn px-3 py-1 text-xs rounded-full border border-white/10 bg-white/5 hover:bg-white/10"
                                    data-value="42.195">Full</button
                                >
                            </div>
                        </div>

                        <div class="space-y-3">
                            <label
                                class="text-sm font-medium text-slate-400 uppercase tracking-wider"
                                >Time (HH:MM:SS)</label
                            >
                            <div class="flex items-center gap-2">
                                <input
                                    id="input-h"
                                    type="number"
                                    placeholder="00"
                                    min="0"
                                    class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-center text-lg text-white outline-none focus:border-sky-400"
                                />
                                <span class="text-slate-500">:</span>
                                <input
                                    id="input-m"
                                    type="number"
                                    value="20"
                                    min="0"
                                    max="59"
                                    class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-center text-lg text-white outline-none focus:border-sky-400"
                                />
                                <span class="text-slate-500">:</span>
                                <input
                                    id="input-s"
                                    type="number"
                                    value="00"
                                    min="0"
                                    max="59"
                                    class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-center text-lg text-white outline-none focus:border-sky-400"
                                />
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Target Distance -->
                <div
                    class="rounded-3xl border border-white/10 bg-white/5 p-8 shadow-glow backdrop-blur space-y-6"
                >
                    <h2 class="text-xl font-semibold text-white">
                        Target Race
                    </h2>
                    <div class="space-y-3">
                        <label
                            class="text-sm font-medium text-slate-400 uppercase tracking-wider"
                            >Distance (km)</label
                        >
                        <input
                            id="target-distance"
                            type="number"
                            step="0.1"
                            value="10"
                            class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-lg text-white outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-400/50"
                        />
                        <div class="flex flex-wrap gap-2">
                            <button
                                class="target-preset-btn px-3 py-1 text-xs rounded-full border border-white/10 bg-white/5 hover:bg-white/10"
                                data-value="5">5k</button
                            >
                            <button
                                class="target-preset-btn px-3 py-1 text-xs rounded-full border border-white/10 bg-white/5 hover:bg-white/10"
                                data-value="10">10k</button
                            >
                            <button
                                class="target-preset-btn px-3 py-1 text-xs rounded-full border border-white/10 bg-white/5 hover:bg-white/10"
                                data-value="21.0975">HM</button
                            >
                            <button
                                class="target-preset-btn px-3 py-1 text-xs rounded-full border border-white/10 bg-white/5 hover:bg-white/10"
                                data-value="42.195">Full</button
                            >
                        </div>
                    </div>
                </div>
            </div>

            <aside class="space-y-6">
                <div
                    class="rounded-3xl border border-white/10 bg-white/10 p-8 shadow-xl backdrop-blur ring-1 ring-sky-400/30"
                >
                    <p class="text-sm uppercase tracking-[0.3em] text-sky-300">
                        Predicted Time
                    </p>
                    <div
                        id="result-time"
                        class="mt-4 text-5xl font-bold text-white tracking-tight"
                    >
                        --:--:--
                    </div>
                    <div
                        class="mt-6 flex justify-between items-center border-t border-white/10 pt-6"
                    >
                        <span class="text-slate-400">Estimated Pace</span>
                        <span
                            id="result-pace"
                            class="text-xl font-semibold text-sky-300"
                            >--:-- min/km</span
                        >
                    </div>
                </div>

                <div
                    class="rounded-3xl border border-white/10 bg-slate-900/60 p-6"
                >
                    <h2 class="text-lg font-semibold text-white">Pro Tip</h2>
                    <p class="mt-3 text-sm text-slate-300 leading-relaxed">
                        Riegel's formula assumes you have trained specifically
                        for the target distance. The prediction is most accurate
                        for races between 3.5 minutes and 3 hours 50 minutes.
                    </p>
                </div>
            </aside>
        </section>
    </main>

    <script>
        import { setupRiegelCalculator } from "../scripts/riegel-ui";

        // Run on first load
        setupRiegelCalculator();

        // Run on view transitions
        document.addEventListener("astro:after-swap", () =>
            setupRiegelCalculator(),
        );
    </script>
</Layout>
