---
import Layout from '../layouts/Layout.astro';
---

<Layout title="VDOT2 Calculator | Jack Daniels Running Formula">
  <main class="mx-auto flex min-h-screen max-w-6xl flex-col gap-10 px-6 pb-14 pt-24">
    <header class="space-y-4">
      <p class="text-sm font-semibold uppercase tracking-[0.3em] text-sky-300">
        Jack Daniels' Method
      </p>
      <h1 class="text-4xl font-semibold leading-tight text-white md:text-5xl">
        VDOT2 Calculator
      </h1>
      <p class="max-w-2xl text-lg text-slate-300">
        Enter a recent race performance to calculate your VDOT2 score and get personalized
        training paces for Easy, Marathon, Threshold, Interval, and Repetition zones.
      </p>
    </header>

    <section class="grid gap-10 lg:grid-cols-[0.8fr_1.2fr]">
      <div class="space-y-8">
        <div class="rounded-3xl border border-white/10 bg-white/5 p-8 shadow-glow backdrop-blur space-y-6">
          <h2 class="text-xl font-semibold text-white">Your Race Performance</h2>

          <div class="space-y-3">
            <label class="text-sm font-medium text-slate-400 uppercase tracking-wider">Distance</label>
            <div class="grid grid-cols-2 gap-2" id="distance-select">
              <button
                class="distance-btn px-4 py-2 rounded-xl bg-sky-500 text-white font-semibold transition hover:bg-sky-400"
                data-distance="5k">
                5K
              </button>
              <button
                class="distance-btn px-4 py-2 rounded-xl bg-white/5 text-slate-200 font-semibold transition hover:bg-white/10"
                data-distance="10k">
                10K
              </button>
              <button
                class="distance-btn px-4 py-2 rounded-xl bg-white/5 text-slate-200 font-semibold transition hover:bg-white/10"
                data-distance="half">
                Half Marathon
              </button>
              <button
                class="distance-btn px-4 py-2 rounded-xl bg-white/5 text-slate-200 font-semibold transition hover:bg-white/10"
                data-distance="marathon">
                Marathon
              </button>
            </div>
          </div>

          <div class="space-y-3">
            <label class="text-sm font-medium text-slate-400 uppercase tracking-wider">Time (HH:MM:SS)</label>
            <div class="flex items-center gap-2">
              <input
                id="input-h"
                type="number"
                placeholder="00"
                min="0"
                class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-center text-lg text-white outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-400/50" />
              <span class="text-2xl text-slate-500">:</span>
              <input
                id="input-m"
                type="number"
                value="20"
                min="0"
                max="59"
                class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-center text-lg text-white outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-400/50" />
              <span class="text-2xl text-slate-500">:</span>
              <input
                id="input-s"
                type="number"
                value="00"
                min="0"
                max="59"
                class="w-full rounded-2xl border border-white/10 bg-slate-900/60 px-4 py-3 text-center text-lg text-white outline-none focus:border-sky-400 focus:ring-2 focus:ring-sky-400/50" />
            </div>
          </div>

          <div class="flex items-center gap-3 pt-2">
            <button
              id="unit-toggle"
              class="flex items-center gap-2 px-4 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 transition">
              <span id="unit-label">km</span>
            </button>
            <span class="text-sm text-slate-400">Switch between km and miles</span>
          </div>
        </div>

        <div class="rounded-3xl border border-white/10 bg-slate-900/60 p-6">
          <h2 class="text-lg font-semibold text-white">About VDOT2</h2>
          <p class="mt-3 text-sm text-slate-300 leading-relaxed">
            VDOT2 (VO₂ DOT) is a pseudo-VO₂max value developed by Dr. Jack Daniels that
            estimates your aerobic capacity based on race performance. It's used to
            determine optimal training paces and predict race times.
          </p>
        </div>
      </div>

      <aside class="space-y-6">
        <div
          id="result-card"
          class="hidden rounded-3xl border border-white/10 bg-white/10 p-8 shadow-xl backdrop-blur ring-1 ring-sky-400/30">
          <p class="text-sm uppercase tracking-[0.3em] text-sky-300">Your VDOT2 Score</p>
          <div id="result-vdot2" class="mt-4 text-6xl font-bold text-white tracking-tight">--</div>
        </div>

        <div
          id="training-paces-section"
          class="hidden rounded-3xl border border-white/10 bg-white/5 p-8 shadow-xl backdrop-blur">
          <h2 class="text-xl font-semibold text-white mb-6">Training Paces</h2>
          <div id="training-paces-container" class="space-y-4"></div>
        </div>

        <div
          id="race-predictions-section"
          class="hidden rounded-3xl border border-white/10 bg-white/5 p-8 shadow-xl backdrop-blur">
          <h2 class="text-xl font-semibold text-white mb-6">Equivalent Race Times</h2>
          <div id="race-predictions-container" class="space-y-3"></div>
        </div>

        <div class="rounded-3xl border border-white/10 bg-slate-900/60 p-6">
          <h2 class="text-lg font-semibold text-white">References</h2>
          <ul class="mt-4 space-y-2 text-sm text-slate-300">
            <li>
              <a
                class="text-sky-300 underline-offset-4 transition hover:text-sky-200 hover:underline"
                href="https://vdoto2.com/calculator"
                rel="noreferrer"
                target="_blank">
                VDOT2 Calculator by V.O2
              </a>
            </li>
            <li>
              <a
                class="text-sky-300 underline-offset-4 transition hover:text-sky-200 hover:underline"
                href="https://philmaffetone.com/180-formula/"
                rel="noreferrer"
                target="_blank">
                Daniels Running Formula Book
              </a>
            </li>
          </ul>
        </div>
      </aside>
    </section>
  </main>

  <script>
    import { setupVdot2Calculator } from "../scripts/vdot2-ui.js";

    setupVdot2Calculator();

    document.addEventListener('astro:after-swap', setupVdot2Calculator);
  </script>
</Layout>
